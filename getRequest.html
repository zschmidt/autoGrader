<!DOCTYPE html>
<html>
<head>
	<title>Don't Worry About It</title>
</head>
<body>


<script type="text/javascript">
	



var xhr = new XMLHttpRequest();
xhr.open('GET', "https://api.travis-ci.org/repos/zschmidt/autoGrader/builds");
xhr.setRequestHeader("Accept", "application/vnd.travis-ci.2+json");
xhr.send();

xhr.addEventListener("readystatechange", getJobID, false);

function getJobID(e){
	if(xhr.readyState === 4 && xhr.status == 200){
		var response = JSON.parse(xhr.response);
		console.log("First response ", response);

		if(response.builds[0].state === "passed"){
			console.log("Most recent build passed!!");
		}else{
			var mostRecentBuildJobID = response.builds[0].job_ids[0];
			xhr = new XMLHttpRequest();
			xhr.open('GET', "https://api.travis-ci.org/jobs/222466811/log");
			xhr.setRequestHeader("Accept", "text/plain");
			xhr.send();
			xhr.addEventListener("readystatechange", getLog, false);
		}

		
	}
}

function getLog(e){
	if(xhr.readyState === 4 && xhr.status == 200){
		var log = xhr.response;
		var logArray = log.split("python module9_challenge_2.py test.py");
		console.log("Here's your log! ", logArray);
	}
}

</script>

</body>
</html>